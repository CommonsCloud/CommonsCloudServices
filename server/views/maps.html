<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Load GeoJSON</title>

<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />
<script src='//api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.js'></script>
<link href='//api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.css' rel='stylesheet' />

<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>
<div id='map'></div>
<script>
var geojson_to_print = <%- __geojson__ %>;

var ChooseTileLayer = function (FeatureCollection) {

  var Tiles = {
    'street': 'developedsimple.i53fbg0j',
    'terrain': 'developedsimple.i53fmdgl',
    'satellite': 'developedsimple.i53fp4f1'
  };

  var TileLayer = tiles['street'];

  if (FeatureCollection.properties.tileLayer) {
    TileLayer = Tiles[FeatureCollection.properties.tileLayer];
  }

  return TileLayer;
};


var basemap = ChooseTileLayer(geojson_to_print);
var map = L.mapbox.map('map', basemap);

// var CCFeatureGroup = new L.FeatureGroup();
// map.addLayer(CCFeatureGroup);

// for(feature = 0; feature < geojson_to_print.features.length; feature++) {
//   console.log('styles',geojson_to_print.features[feature].properties.style);
//   var single_feature = L.geoJson(geojson_to_print.features[feature], {
//     style: geojson_to_print.features[feature].properties.style
//   });
//   CCFeatureGroup.addLayer(single_feature);
// };

// map.fitBounds(CCFeatureGroup.getBounds());


map.on('ready', function() {
  // the layer has been fully loaded now, and you can
  // call .getTileJSON and investigate its properties
  console.log('map is ready to use');
});

</script>
</body>
</html>